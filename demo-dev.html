<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=980" />
	<title>Winbits Vertical</title>
  <script type="text/javascript" src="js/porthole.min.js"></script>
  <script type="text/javascript">
    var Winbits = { userConfig: {
      baseUrl: '.'
    } };
  </script>
  <script type="text/javascript" src="winbits.js"></script>
  <script type="text/javascript">
    var windowProxy;
    window.onload=function(){
      // Create a proxy window to send to and receive
      // messages from the iFrame
      windowProxy = new Porthole.WindowProxy(
          'http://api.winbits.com/widgets/framefb/proxy.html', 'winbits-frame');

      // Register an event handler to receive messages;
      windowProxy.addEventListener(function (messageEvent) {
        console.log(['Message from Winbits', messageEvent]);
        var data = messageEvent.data;
        var handlerFn = Winbits.Handlers[data.action + 'Handler'];
        console.log(['Handler', handlerFn]);
        if (handlerFn) {
          handlerFn.apply(this, data.params);
        } else {
          console.log('Invalid action from Winbits');
        }
      });

      Winbits.Handlers = Winbits.Handlers || {};
      Winbits.Handlers.loginHandler = function (response) {
        console.log(['Handling login', this]);
        console.log(['Handling login', response]);
        if (response.authResponse) {
          console.log('Facebook login success!');
        } else {
          console.log('Facebook login failed!');
        }
      };
      Winbits.Handlers.meHandler = function () {

      };
    };
  </script>
</head>
<body>
<div id="winbits-widget"></div>
<iframe name="winbits-frame" src ="http://api.winbits.com/widgets/framefb/framefb.html" style="display:none;" >
</iframe>
</body>
</html>