(function(){
  window.Winbits = {env: {}};
  Winbits.env.baseUrl = "{{baseUrl}}";
  Winbits.env.providerUrl = "{{providerUrl}}";

  var JavaScript = {
    load: function(src, callback) {
      var script = document.createElement('script');
      var loaded;
      script.setAttribute("type","text/javascript");
      script.setAttribute('src', src);
      if (callback) {
        if (script.readyState) {
          script.onreadystatechange = function () { // For old versions of IE
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
              callback();
            }
          };
        } else { // Other browsers
          script.onload = callback;
        }
      }
      (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script);
    }
  };

  var head= document.getElementsByTagName('head')[0];
  var appendTagTo = function(parentTag, tagName, tagAttributes) {
    var tag= document.createElement(tagName), i, tagAttr;
    for(i = 0; i < tagAttributes.length; i++) {
      tagAttr = tagAttributes[i];
      tag.setAttribute(tagAttr.name, tagAttr.value);
    }
    parentTag.appendChild(tag);
  };

  appendTagTo(head, 'link', [{name: 'rel', value: 'stylesheet'}, {name: 'type', value: 'text/css'},
      {name: 'href', value: Winbits.env.baseUrl + "/stylesheets/app.css"}]);
  JavaScript.load(Winbits.env.baseUrl + "/javascripts/vendor.js", function() {
    JavaScript.load(Winbits.env.baseUrl + "/javascripts/app.js", function() {
      require('initialize');
    });
  });
})();
